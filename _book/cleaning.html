<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 2 How to use this codebook? | Vietnam Enterprise Census Codebook</title>
<meta name="author" content="DEPOCEN research team">
<meta name="description" content="2.1 Overview You likely have a task related to the Vietnam Enterprise Survey (VES) dataset, or you simply want to explore the situation of enterprises in Vietnam, but you don’t know where to...">
<meta name="generator" content="bookdown 0.44 with bs4_book()">
<meta property="og:title" content="Chapter 2 How to use this codebook? | Vietnam Enterprise Census Codebook">
<meta property="og:type" content="book">
<meta property="og:description" content="2.1 Overview You likely have a task related to the Vietnam Enterprise Survey (VES) dataset, or you simply want to explore the situation of enterprises in Vietnam, but you don’t know where to...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 2 How to use this codebook? | Vietnam Enterprise Census Codebook">
<meta name="twitter:description" content="2.1 Overview You likely have a task related to the Vietnam Enterprise Survey (VES) dataset, or you simply want to explore the situation of enterprises in Vietnam, but you don’t know where to...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Lato-0.4.10/font.css" rel="stylesheet">
<link href="libs/Roboto_Mono-0.4.10/font.css" rel="stylesheet">
<link href="libs/Montserrat-0.4.10/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Google Analytics (optional) --><!-- Uncomment and add your tracking ID if needed --><!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=YOUR_TRACKING_ID"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'YOUR_TRACKING_ID');
    </script>
    --><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h2>
        <a href="index.html" title="">Vietnam Enterprise Census Codebook</a>
      </h2>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled"><li><a class="" href="index.html"><span class="header-section-number">Chapter 2</span> How to use this codebook?</a></li></ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/depocen-cased/vec">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="cleaning" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> How to use this codebook?<a class="anchor" aria-label="anchor" href="#cleaning"><i class="fas fa-link"></i></a>
</h1>
<div id="cleaning-overview" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Overview<a class="anchor" aria-label="anchor" href="#cleaning-overview"><i class="fas fa-link"></i></a>
</h2>
<p>You likely have a task related to the Vietnam Enterprise Survey (VES) dataset, or you simply want to explore the situation of enterprises in Vietnam, but you don’t know where to start. We often begin by downloading the data, struggling with a mess of messy variables, then fumbling to find questionnaires, determining which question corresponds to which variable in the data, and noting potential issues. This typical process often consumes a lot of time and can even lead to errors due to the massive amount of information.</p>
<p>Therefore, this codebook focuses on two main issues:</p>
<ol style="list-style-type: decimal">
<li>Providing you with an enterprise dataset cleaned according to DEPOCEN’s process, so you can immediately start analyzing and exploring the data without struggling with raw data issues.</li>
<li>Explaining the processing procedure so you can verify the process, raise questions about issues you encounter, and contribute to improving the process further.</li>
</ol>
<p>Regardless of your purpose for coming here, your usage and contributions are crucial for us to improve even more.</p>
</div>
<div id="use-cleaned-data" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> If you just want to use the cleaned data<a class="anchor" aria-label="anchor" href="#use-cleaned-data"><i class="fas fa-link"></i></a>
</h2>
<p>If you just want to use the cleaned data, you can access this link: <a href="https://drive.google.com/open?id=1FwfSDzEThzsyMPOXh1CnJOyMp0tXKHg1&amp;usp=drive_fs"><strong>here</strong></a>. Chose the file that you want to download, and download it to your local machine. Please, only dowload the file that you need, do not modify anything in this folder.</p>
<p>The final data cover from 2000 to 2021, with the following variables:</p>
<ul>
<li>Tax code</li>
<li>Secondary tax code</li>
<li>Year (survey/reference year)</li>
<li>Survey province code</li>
<li>Survey district code</li>
<li>Survey commune/ward code</li>
<li>Year of starting production and business</li>
<li>Enterprise operating status</li>
<li>Type of enterprise</li>
<li>VSIC 2018 4‑digit industry code</li>
<li>VSIC 2007 4‑digit industry code</li>
<li>VSIC 1993 4‑digit industry code</li>
<li>Number of employees</li>
<li>Number of female employees</li>
<li>Total expenses related to employees</li>
<li>Total assets</li>
<li>Fixed assets</li>
<li>Historical cost</li>
<li>Accumulated depreciation</li>
<li>Construction in progress</li>
<li>Total liabilities</li>
<li>Total revenue</li>
<li>Revenue from sale of goods and services</li>
<li>Net revenue from sale of goods and services</li>
<li>Cost of goods sold</li>
<li>Reductions in revenue</li>
<li>Financial income</li>
<li>Other income</li>
<li>Profit before tax</li>
<li>Corporate income tax expense</li>
<li>Import activity (yes/no)</li>
<li>Export activity (yes/no)</li>
<li>Has import or export activities</li>
</ul>
<p>If you want to check what is the raw name of each variables in the raw data, you can access the data dictionary <a href="https://docs.google.com/spreadsheets/d/1z1FoluAF2u6vSx7LM_uHxjLDjmr7d3JHDB1zvJiu-cs/edit?gid=52042540#gid=52042540"><strong>here</strong></a>.</p>
</div>
<div id="clean-data" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> If you want to know how we clean the data<a class="anchor" aria-label="anchor" href="#clean-data"><i class="fas fa-link"></i></a>
</h2>
<p>If you want to know how we clean the data, you can dowload the raw data from the link here <a href="https://drive.google.com/drive/folders/1EDgL9KqYd5ZnVLpDItbqUxT8wdMyy5Lq?usp=drive_link"><strong>here</strong></a>, and follow the steps below to clean the data.</p>
<p>The raw data is organized in the following folder structure: The data folder for each year is named as “VES_year”. In each folder, there are plenty of dta data file, you should only focus on the file that is named as “dn_year.dta”. That is the data that you need to clean. For other files, you can ignore them, we will update on how to use them in the future.</p>
<p>The folder that you dowload is “01_raw”, It also include the questionaires for each year that we use to clean the data. If available, read it carefully to understand the context of the data.</p>
<p>Now, you create a new folder for your project, and put the raw data and questionaires in it.</p>
<pre><code># Example folder structure
# 01_raw/       - Raw datasets and questionaires
# 02_temp/      - Temporary files
# 03_clean/     - Cleaned datasets
# 04_output/    - Output files</code></pre>
<p>Then, you need to dowload this stata script <a href="https://drive.google.com/file/d/1vlgxfHo7MrRWSOlW0lmsaXpjT3R-3FMH/view?usp=drive_link"><strong>here</strong></a>, and put it in your project folder.</p>
<pre><code># Example folder structure
# 01_raw/       - Raw datasets and questionaires
# 02_temp/      - Temporary files
# 03_clean/     - Cleaned datasets
# 04_output/    - Output files
# 00_setup.do   - Setup and clean script</code></pre>
<p>Run the setup script to setup the folder and clean the data, before running the script, you need to set up the directory of the project folder</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb3-1"><a href="cleaning.html#cb3-1" tabindex="-1"></a><span class="co">// -------------------------------------------------------------------------- //</span></span>
<span id="cb3-2"><a href="cleaning.html#cb3-2" tabindex="-1"></a>**# Set Working Directory</span>
<span id="cb3-3"><a href="cleaning.html#cb3-3" tabindex="-1"></a><span class="co">// -------------------------------------------------------------------------- //</span></span>
<span id="cb3-4"><a href="cleaning.html#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="cleaning.html#cb3-5" tabindex="-1"></a>* User must uncomment the following <span class="kw">line</span> (<span class="st">"global ..."</span>) and <span class="kw">set</span> the filepath equal to the folder containing <span class="kw">this</span> <span class="kw">run</span>.<span class="kw">do</span> file </span>
<span id="cb3-6"><a href="cleaning.html#cb3-6" tabindex="-1"></a>gl MyProject <span class="st">".../your_project_folder/"</span></span>
<span id="cb3-7"><a href="cleaning.html#cb3-7" tabindex="-1"></a>    gl <span class="kw">data</span> <span class="st">"$MyProject/data"</span></span>
<span id="cb3-8"><a href="cleaning.html#cb3-8" tabindex="-1"></a>        gl raw      <span class="st">"$MyProject/01_raw"</span></span>
<span id="cb3-9"><a href="cleaning.html#cb3-9" tabindex="-1"></a>        gl tem      <span class="st">"$MyProject/02_temp"</span></span>
<span id="cb3-10"><a href="cleaning.html#cb3-10" tabindex="-1"></a>        gl <span class="kw">clean</span>    <span class="st">"$MyProject/03_clean"</span>   </span>
<span id="cb3-11"><a href="cleaning.html#cb3-11" tabindex="-1"></a>        gl out      <span class="st">"$MyProject/04_output"</span></span></code></pre></div>
<p>I will explain the script below:</p>
<p>A common issue when cleaning survey data spanning multiple years, especially with VEC, is the inconsistency in variable names and content across years. To address this, we synchronize variable names and content across years using an Excel file that maps variables from different years to a single standardized format.</p>
<p>You can copy the Excel link in the code below to download this file. The structure of the Excel file is shown in the image below:</p>
<div class="inline-figure"><img src="images/codebook_structure.png" style="width:100.0%"></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb4-1"><a href="cleaning.html#cb4-1" tabindex="-1"></a><span class="co">// -------------------------------------------------------------------------- //</span></span>
<span id="cb4-2"><a href="cleaning.html#cb4-2" tabindex="-1"></a>**# 0. Make the dofile <span class="kw">for</span> each <span class="fu">year</span></span>
<span id="cb4-3"><a href="cleaning.html#cb4-3" tabindex="-1"></a><span class="co">// -------------------------------------------------------------------------- //</span></span>
<span id="cb4-4"><a href="cleaning.html#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="cleaning.html#cb4-5" tabindex="-1"></a>    import excel <span class="st">"https://docs.google.com/spreadsheets/d/1z1FoluAF2u6vSx7LM_uHxjLDjmr7d3JHDB1zvJiu-cs/export?format=xlsx"</span>, <span class="co">///</span></span>
<span id="cb4-6"><a href="cleaning.html#cb4-6" tabindex="-1"></a>        <span class="kw">clear</span> firstrow</span>
<span id="cb4-7"><a href="cleaning.html#cb4-7" tabindex="-1"></a>    </span>
<span id="cb4-8"><a href="cleaning.html#cb4-8" tabindex="-1"></a>        <span class="kw">drop</span> <span class="kw">if</span> Code_name == <span class="st">""</span></span>
<span id="cb4-9"><a href="cleaning.html#cb4-9" tabindex="-1"></a>        </span>
<span id="cb4-10"><a href="cleaning.html#cb4-10" tabindex="-1"></a>    <span class="kw">local</span> <span class="kw">N</span> = _N</span>
<span id="cb4-11"><a href="cleaning.html#cb4-11" tabindex="-1"></a>    </span>
<span id="cb4-12"><a href="cleaning.html#cb4-12" tabindex="-1"></a>    forval i = 2000/2021 {</span>
<span id="cb4-13"><a href="cleaning.html#cb4-13" tabindex="-1"></a>        file open myfile <span class="kw">using</span> <span class="st">`"</span><span class="ot">$tem</span>/label<span class="ot">`i'</span>.do<span class="st">"', write text replace</span></span>
<span id="cb4-14"><a href="cleaning.html#cb4-14" tabindex="-1"></a><span class="st">        </span></span>
<span id="cb4-15"><a href="cleaning.html#cb4-15" tabindex="-1"></a><span class="st">        local renamed_vars ""</span></span>
<span id="cb4-16"><a href="cleaning.html#cb4-16" tabindex="-1"></a><span class="st">        forval iii = 1/`N' {</span></span>
<span id="cb4-17"><a href="cleaning.html#cb4-17" tabindex="-1"></a><span class="st">            local vvvcode = Code_name[`iii']</span></span>
<span id="cb4-18"><a href="cleaning.html#cb4-18" tabindex="-1"></a><span class="st">            local vvv_i = var_`i'[`iii']  </span></span>
<span id="cb4-19"><a href="cleaning.html#cb4-19" tabindex="-1"></a><span class="st">            </span></span>
<span id="cb4-20"><a href="cleaning.html#cb4-20" tabindex="-1"></a><span class="st">            if `"</span><span class="ot">`vvv_i'</span><span class="st">"' != "" {</span></span>
<span id="cb4-21"><a href="cleaning.html#cb4-21" tabindex="-1"></a><span class="st">                local result = `"</span>ren <span class="ot">`vvv_i'</span> <span class="ot">`vvvcode'</span><span class="st">"'</span></span>
<span id="cb4-22"><a href="cleaning.html#cb4-22" tabindex="-1"></a><span class="st">                local renamed_vars "</span><span class="ot">`renamed_vars'</span> <span class="ot">`vvvcode'</span><span class="st">"</span></span>
<span id="cb4-23"><a href="cleaning.html#cb4-23" tabindex="-1"></a><span class="st">                * Ghi dòng kết quả vào tệp do-file</span></span>
<span id="cb4-24"><a href="cleaning.html#cb4-24" tabindex="-1"></a><span class="st">                file write myfile `"</span><span class="ot">`result'</span><span class="st">"' _n</span></span>
<span id="cb4-25"><a href="cleaning.html#cb4-25" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb4-26"><a href="cleaning.html#cb4-26" tabindex="-1"></a><span class="st">        }</span></span>
<span id="cb4-27"><a href="cleaning.html#cb4-27" tabindex="-1"></a><span class="st">        file write myfile `"</span>keep <span class="ot">`renamed_vars'</span><span class="st">"' _n</span></span>
<span id="cb4-28"><a href="cleaning.html#cb4-28" tabindex="-1"></a><span class="st">    </span></span>
<span id="cb4-29"><a href="cleaning.html#cb4-29" tabindex="-1"></a><span class="st">        file close myfile</span></span>
<span id="cb4-30"><a href="cleaning.html#cb4-30" tabindex="-1"></a><span class="st">        }</span></span></code></pre></div>
<p>After running the code above, Stata will generate 22 do-files, one for each year. These do-files contain commands to synchronize variable names and content across years.</p>
<p>We will now use these do-files to standardize the data. Once the variable names are synchronized, we can easily append the yearly data to create a panel dataset using the following command:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb5-1"><a href="cleaning.html#cb5-1" tabindex="-1"></a><span class="co">// -------------------------------------------------------------------------- //</span></span>
<span id="cb5-2"><a href="cleaning.html#cb5-2" tabindex="-1"></a>**# 1. Rename raw <span class="kw">data</span> <span class="kw">for</span> each <span class="fu">year</span> and make panel <span class="kw">data</span></span>
<span id="cb5-3"><a href="cleaning.html#cb5-3" tabindex="-1"></a><span class="co">// -------------------------------------------------------------------------- //</span></span>
<span id="cb5-4"><a href="cleaning.html#cb5-4" tabindex="-1"></a>    </span>
<span id="cb5-5"><a href="cleaning.html#cb5-5" tabindex="-1"></a><span class="kw">clear</span> <span class="ot">all</span></span>
<span id="cb5-6"><a href="cleaning.html#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="cleaning.html#cb5-7" tabindex="-1"></a>    <span class="kw">tempfile</span> combined_data</span>
<span id="cb5-8"><a href="cleaning.html#cb5-8" tabindex="-1"></a>    <span class="kw">save</span> <span class="ot">`combined_data'</span>, emptyok <span class="kw">replace</span></span>
<span id="cb5-9"><a href="cleaning.html#cb5-9" tabindex="-1"></a>    </span>
<span id="cb5-10"><a href="cleaning.html#cb5-10" tabindex="-1"></a>    forval i = 2000/2021 {</span>
<span id="cb5-11"><a href="cleaning.html#cb5-11" tabindex="-1"></a>    </span>
<span id="cb5-12"><a href="cleaning.html#cb5-12" tabindex="-1"></a>        <span class="kw">di</span> <span class="st">"Processing year `i'..."</span></span>
<span id="cb5-13"><a href="cleaning.html#cb5-13" tabindex="-1"></a>    </span>
<span id="cb5-14"><a href="cleaning.html#cb5-14" tabindex="-1"></a>        * Load <span class="kw">data</span></span>
<span id="cb5-15"><a href="cleaning.html#cb5-15" tabindex="-1"></a>        <span class="kw">use</span> <span class="st">"$raw/VES_`i'/dn`i'.dta"</span>, <span class="kw">clear</span></span>
<span id="cb5-16"><a href="cleaning.html#cb5-16" tabindex="-1"></a>    </span>
<span id="cb5-17"><a href="cleaning.html#cb5-17" tabindex="-1"></a>        * Run <span class="kw">rename</span> <span class="kw">do</span>-file</span>
<span id="cb5-18"><a href="cleaning.html#cb5-18" tabindex="-1"></a>        <span class="kw">do</span> <span class="st">"$tem/label`i'.do"</span></span>
<span id="cb5-19"><a href="cleaning.html#cb5-19" tabindex="-1"></a>    </span>
<span id="cb5-20"><a href="cleaning.html#cb5-20" tabindex="-1"></a>        * Generate <span class="fu">year</span></span>
<span id="cb5-21"><a href="cleaning.html#cb5-21" tabindex="-1"></a>        <span class="kw">gen</span> <span class="fu">year</span> = <span class="ot">`i'</span></span>
<span id="cb5-22"><a href="cleaning.html#cb5-22" tabindex="-1"></a>        </span>
<span id="cb5-23"><a href="cleaning.html#cb5-23" tabindex="-1"></a>        <span class="kw">if</span> <span class="fu">year</span> == 2013 {</span>
<span id="cb5-24"><a href="cleaning.html#cb5-24" tabindex="-1"></a>            <span class="kw">gen</span> huyen = .</span>
<span id="cb5-25"><a href="cleaning.html#cb5-25" tabindex="-1"></a>            <span class="kw">gen</span> xa = .</span>
<span id="cb5-26"><a href="cleaning.html#cb5-26" tabindex="-1"></a>        }</span>
<span id="cb5-27"><a href="cleaning.html#cb5-27" tabindex="-1"></a>        </span>
<span id="cb5-28"><a href="cleaning.html#cb5-28" tabindex="-1"></a>        <span class="kw">foreach</span> <span class="kw">var</span> <span class="kw">in</span> tinh huyen xa nganh {</span>
<span id="cb5-29"><a href="cleaning.html#cb5-29" tabindex="-1"></a>            <span class="kw">capture</span> <span class="kw">confirm</span> <span class="kw">numeric</span> <span class="kw">variable</span> <span class="ot">`var'</span></span>
<span id="cb5-30"><a href="cleaning.html#cb5-30" tabindex="-1"></a>            <span class="kw">if</span> <span class="dt">_rc</span> {</span>
<span id="cb5-31"><a href="cleaning.html#cb5-31" tabindex="-1"></a>                <span class="kw">destring</span> <span class="ot">`var'</span>, <span class="kw">replace</span> <span class="kw">force</span></span>
<span id="cb5-32"><a href="cleaning.html#cb5-32" tabindex="-1"></a>                }</span>
<span id="cb5-33"><a href="cleaning.html#cb5-33" tabindex="-1"></a>            }</span>
<span id="cb5-34"><a href="cleaning.html#cb5-34" tabindex="-1"></a>        </span>
<span id="cb5-35"><a href="cleaning.html#cb5-35" tabindex="-1"></a>        * Append safely</span>
<span id="cb5-36"><a href="cleaning.html#cb5-36" tabindex="-1"></a>        <span class="kw">append</span> <span class="kw">using</span> <span class="ot">`combined_data'</span></span>
<span id="cb5-37"><a href="cleaning.html#cb5-37" tabindex="-1"></a>    </span>
<span id="cb5-38"><a href="cleaning.html#cb5-38" tabindex="-1"></a>        * Save back to <span class="kw">tempfile</span></span>
<span id="cb5-39"><a href="cleaning.html#cb5-39" tabindex="-1"></a>        <span class="kw">save</span> <span class="ot">`combined_data'</span>, <span class="kw">replace</span></span>
<span id="cb5-40"><a href="cleaning.html#cb5-40" tabindex="-1"></a>    }</span>
<span id="cb5-41"><a href="cleaning.html#cb5-41" tabindex="-1"></a>            </span>
<span id="cb5-42"><a href="cleaning.html#cb5-42" tabindex="-1"></a>    <span class="kw">save</span> <span class="st">"$tem/ves_00_21.dta"</span>, <span class="kw">replace</span></span></code></pre></div>
<p>The result is a “ves_00_21.dta” file, which is a panel dataset with synchronized variable names. However, since survey content may vary by year, specific adjustments are needed to ensure consistency.
We use the command below to keep only the variables of interest and order them as desired.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb6-1"><a href="cleaning.html#cb6-1" tabindex="-1"></a><span class="co">// -------------------------------------------------------------------------- //</span></span>
<span id="cb6-2"><a href="cleaning.html#cb6-2" tabindex="-1"></a>**# 2. Tidy Clean panel <span class="kw">data</span></span>
<span id="cb6-3"><a href="cleaning.html#cb6-3" tabindex="-1"></a><span class="co">// -------------------------------------------------------------------------- //</span></span>
<span id="cb6-4"><a href="cleaning.html#cb6-4" tabindex="-1"></a>    * <span class="kw">ssc</span> install keeporder <span class="co">// if you have not installed this package</span></span>
<span id="cb6-5"><a href="cleaning.html#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="cleaning.html#cb6-6" tabindex="-1"></a>    <span class="kw">use</span> <span class="st">"$tem/ves_00_21.dta"</span>, <span class="kw">clear</span></span>
<span id="cb6-7"><a href="cleaning.html#cb6-7" tabindex="-1"></a>    </span>
<span id="cb6-8"><a href="cleaning.html#cb6-8" tabindex="-1"></a>    keeporder   mst mst_2 <span class="fu">year</span>                                                                  <span class="co">///                                                                 </span></span>
<span id="cb6-9"><a href="cleaning.html#cb6-9" tabindex="-1"></a>                tinh huyen xa                                                                   <span class="co">///                                                                     </span></span>
<span id="cb6-10"><a href="cleaning.html#cb6-10" tabindex="-1"></a>                namsxkd tthd lhdn lhdn_1 lhdn_2 nganh nganh_cu                                  <span class="co">///                         </span></span>
<span id="cb6-11"><a href="cleaning.html#cb6-11" tabindex="-1"></a>                laodong_dk laodong_ck laodong_nu_ck laodong_nu_dk                               <span class="co">///                                 </span></span>
<span id="cb6-12"><a href="cleaning.html#cb6-12" tabindex="-1"></a>                luong_0 luong_1 luong_2 luong_3                                                 <span class="co">///                     </span></span>
<span id="cb6-13"><a href="cleaning.html#cb6-13" tabindex="-1"></a>                taisan_tong_dk taisan_tong_ck                                                   <span class="co">///             </span></span>
<span id="cb6-14"><a href="cleaning.html#cb6-14" tabindex="-1"></a>                taisan_codinh_dk taisan_codinh_ck ng_dk ng_ck hmlk_dk hmlk_ck xdcb_dk xdcb_ck   <span class="co">///                                                             </span></span>
<span id="cb6-15"><a href="cleaning.html#cb6-15" tabindex="-1"></a>                nophaitra_dk nophaitra_ck                                                       <span class="co">///         </span></span>
<span id="cb6-16"><a href="cleaning.html#cb6-16" tabindex="-1"></a>                tongdoanhthu                                                                    <span class="co">///</span></span>
<span id="cb6-17"><a href="cleaning.html#cb6-17" tabindex="-1"></a>                doanhthubanhang doanhthuthuan giavon giamtru                                    <span class="co">///                             </span></span>
<span id="cb6-18"><a href="cleaning.html#cb6-18" tabindex="-1"></a>                doanhthutaichinh doanhthukhac                                                   <span class="co">///             </span></span>
<span id="cb6-19"><a href="cleaning.html#cb6-19" tabindex="-1"></a>                tongloinhuan thuethunhap                                                        <span class="co">///         </span></span>
<span id="cb6-20"><a href="cleaning.html#cb6-20" tabindex="-1"></a>                loinhuan_lai loinhuan_lo loinhuan_sau_lai loinhuan_sau_lo                       <span class="co">///                                         </span></span>
<span id="cb6-21"><a href="cleaning.html#cb6-21" tabindex="-1"></a>                nhapkhau xuatkhau xuatnhapkhau                                                                  </span></code></pre></div>
<p>Location variables are crucial as they indicate the geographical distribution of enterprises across communes, districts, and provinces. However, these variables may vary across years due to administrative boundary changes. This section is currently being updated, but you can still reliably use province-level data, as provincial boundaries have not changed significantly during the 2000-2021 period.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb7-1"><a href="cleaning.html#cb7-1" tabindex="-1"></a>**## 2.1. Clean Location Variables</span>
<span id="cb7-2"><a href="cleaning.html#cb7-2" tabindex="-1"></a>* Under development</span></code></pre></div>
<p>Similarly, enterprise types are classified differently in different periods. We have constructed a new classification system that is comprehensive and consistent across years. You can refer to this by copying the link in the code to download the Excel file for details.</p>
<p>The command below merges the enterprise type (<code>lhdn</code>) from each year with the new classification, creating a new variable named <code>lhdn_dpc</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb8-1"><a href="cleaning.html#cb8-1" tabindex="-1"></a>**## 2.2. Clean <span class="dv">type</span> <span class="kw">of</span> enterprises </span>
<span id="cb8-2"><a href="cleaning.html#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="cleaning.html#cb8-3" tabindex="-1"></a>    <span class="kw">preserve</span></span>
<span id="cb8-4"><a href="cleaning.html#cb8-4" tabindex="-1"></a>        import excel <span class="st">"https://docs.google.com/spreadsheets/d/1z1FoluAF2u6vSx7LM_uHxjLDjmr7d3JHDB1zvJiu-cs/export?format=xlsx&amp;gid=1229044769"</span>, <span class="co">///</span></span>
<span id="cb8-5"><a href="cleaning.html#cb8-5" tabindex="-1"></a>            <span class="kw">clear</span> firstrow</span>
<span id="cb8-6"><a href="cleaning.html#cb8-6" tabindex="-1"></a></span>
<span id="cb8-7"><a href="cleaning.html#cb8-7" tabindex="-1"></a>        <span class="kw">tempfile</span> cw_lhdn</span>
<span id="cb8-8"><a href="cleaning.html#cb8-8" tabindex="-1"></a>        <span class="kw">save</span> <span class="ot">`cw_lhdn'</span></span>
<span id="cb8-9"><a href="cleaning.html#cb8-9" tabindex="-1"></a>    <span class="kw">restore</span></span>
<span id="cb8-10"><a href="cleaning.html#cb8-10" tabindex="-1"></a></span>
<span id="cb8-11"><a href="cleaning.html#cb8-11" tabindex="-1"></a>    <span class="kw">merge</span> <span class="fu">m</span>:1 lhdn <span class="fu">year</span> <span class="kw">using</span> <span class="ot">`cw_lhdn'</span></span>
<span id="cb8-12"><a href="cleaning.html#cb8-12" tabindex="-1"></a>        <span class="kw">drop</span> <span class="kw">if</span> _m == 2</span>
<span id="cb8-13"><a href="cleaning.html#cb8-13" tabindex="-1"></a>        <span class="kw">drop</span> _m</span></code></pre></div>
<p>Industrial classification is much more complex than other variables due to the large number of industry codes and two major revisions: VSIC 2007 and VSIC 2018. We address this by creating crosswalk data files to map new industry codes to old ones, generating three new variables: <code>vsic4_2018</code>, <code>vsic4_2007</code>, and <code>vsic4_1993</code>. This allows users to conveniently choose the industry classification that suits their research purpose.
The code is quite complex, but the underlying principle is simple.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb9-1"><a href="cleaning.html#cb9-1" tabindex="-1"></a>**## 2.3. Clean industrial Classification </span>
<span id="cb9-2"><a href="cleaning.html#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="cleaning.html#cb9-3" tabindex="-1"></a>    <span class="kw">replace</span> nganh = <span class="kw">int</span>(nganh/10) <span class="kw">if</span> <span class="fu">year</span> == 2004 | <span class="fu">year</span> == 2005                <span class="co">// need check</span></span>
<span id="cb9-4"><a href="cleaning.html#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="cleaning.html#cb9-5" tabindex="-1"></a>    <span class="kw">gen</span> vsic4 = <span class="kw">int</span>(nganh/10) <span class="kw">if</span> <span class="fu">year</span> &gt;= 2004</span>
<span id="cb9-6"><a href="cleaning.html#cb9-6" tabindex="-1"></a>        <span class="kw">replace</span> vsic4 = nganh <span class="kw">if</span> <span class="fu">year</span> &lt;= 2003</span>
<span id="cb9-7"><a href="cleaning.html#cb9-7" tabindex="-1"></a></span>
<span id="cb9-8"><a href="cleaning.html#cb9-8" tabindex="-1"></a>    <span class="kw">preserve</span></span>
<span id="cb9-9"><a href="cleaning.html#cb9-9" tabindex="-1"></a>        <span class="kw">use</span> <span class="st">"$tem/cw_vsic_2018_2007_1993"</span>, <span class="kw">clear</span></span>
<span id="cb9-10"><a href="cleaning.html#cb9-10" tabindex="-1"></a>            <span class="kw">duplicates</span> <span class="kw">drop</span> vsic4_2018, <span class="kw">force</span></span>
<span id="cb9-11"><a href="cleaning.html#cb9-11" tabindex="-1"></a>        <span class="kw">save</span> <span class="st">"$tem/cw_vsic_2018"</span>, <span class="kw">replace</span></span>
<span id="cb9-12"><a href="cleaning.html#cb9-12" tabindex="-1"></a>        </span>
<span id="cb9-13"><a href="cleaning.html#cb9-13" tabindex="-1"></a>        <span class="kw">use</span> <span class="st">"$tem/cw_vsic_2018_2007_1993"</span>, <span class="kw">clear</span></span>
<span id="cb9-14"><a href="cleaning.html#cb9-14" tabindex="-1"></a>            <span class="kw">duplicates</span> <span class="kw">drop</span> vsic4_1993, <span class="kw">force</span></span>
<span id="cb9-15"><a href="cleaning.html#cb9-15" tabindex="-1"></a>        <span class="kw">save</span> <span class="st">"$tem/cw_vsic_1993"</span>, <span class="kw">replace</span></span>
<span id="cb9-16"><a href="cleaning.html#cb9-16" tabindex="-1"></a>    <span class="kw">restore</span></span>
<span id="cb9-17"><a href="cleaning.html#cb9-17" tabindex="-1"></a>    </span>
<span id="cb9-18"><a href="cleaning.html#cb9-18" tabindex="-1"></a>    <span class="kw">preserve</span></span>
<span id="cb9-19"><a href="cleaning.html#cb9-19" tabindex="-1"></a>        <span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span> &gt;= 2019</span>
<span id="cb9-20"><a href="cleaning.html#cb9-20" tabindex="-1"></a>        <span class="kw">ren</span> vsic4 vsic4_2018</span>
<span id="cb9-21"><a href="cleaning.html#cb9-21" tabindex="-1"></a>        </span>
<span id="cb9-22"><a href="cleaning.html#cb9-22" tabindex="-1"></a>        <span class="kw">merge</span> <span class="fu">m</span>:1 vsic4_2018 <span class="kw">using</span> <span class="st">"$tem/cw_vsic_2018"</span></span>
<span id="cb9-23"><a href="cleaning.html#cb9-23" tabindex="-1"></a>            <span class="kw">drop</span> <span class="kw">if</span> _m == 2</span>
<span id="cb9-24"><a href="cleaning.html#cb9-24" tabindex="-1"></a>            <span class="kw">drop</span> _m </span>
<span id="cb9-25"><a href="cleaning.html#cb9-25" tabindex="-1"></a>        </span>
<span id="cb9-26"><a href="cleaning.html#cb9-26" tabindex="-1"></a>        <span class="kw">tempfile</span> vsic4_2018</span>
<span id="cb9-27"><a href="cleaning.html#cb9-27" tabindex="-1"></a>        <span class="kw">save</span> <span class="ot">`vsic4_2018'</span>, <span class="kw">replace</span></span>
<span id="cb9-28"><a href="cleaning.html#cb9-28" tabindex="-1"></a>    <span class="kw">restore</span></span>
<span id="cb9-29"><a href="cleaning.html#cb9-29" tabindex="-1"></a>    </span>
<span id="cb9-30"><a href="cleaning.html#cb9-30" tabindex="-1"></a>    <span class="kw">preserve</span></span>
<span id="cb9-31"><a href="cleaning.html#cb9-31" tabindex="-1"></a>        <span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span> &lt;= 2019 &amp; <span class="fu">year</span> &gt;= 2006</span>
<span id="cb9-32"><a href="cleaning.html#cb9-32" tabindex="-1"></a>        <span class="kw">ren</span> vsic4 vsic4_2007</span>
<span id="cb9-33"><a href="cleaning.html#cb9-33" tabindex="-1"></a>        </span>
<span id="cb9-34"><a href="cleaning.html#cb9-34" tabindex="-1"></a>        <span class="kw">merge</span> <span class="fu">m</span>:1 vsic4_2007 <span class="kw">using</span> <span class="st">"$tem/cw_vsic_2018_2007_1993"</span></span>
<span id="cb9-35"><a href="cleaning.html#cb9-35" tabindex="-1"></a>            <span class="kw">drop</span> <span class="kw">if</span> _m == 2</span>
<span id="cb9-36"><a href="cleaning.html#cb9-36" tabindex="-1"></a>            <span class="kw">drop</span> _m </span>
<span id="cb9-37"><a href="cleaning.html#cb9-37" tabindex="-1"></a>        </span>
<span id="cb9-38"><a href="cleaning.html#cb9-38" tabindex="-1"></a>        <span class="kw">tempfile</span> vsic4_2007</span>
<span id="cb9-39"><a href="cleaning.html#cb9-39" tabindex="-1"></a>        <span class="kw">save</span> <span class="ot">`vsic4_2007'</span>, <span class="kw">replace</span></span>
<span id="cb9-40"><a href="cleaning.html#cb9-40" tabindex="-1"></a>    <span class="kw">restore</span></span>
<span id="cb9-41"><a href="cleaning.html#cb9-41" tabindex="-1"></a>    </span>
<span id="cb9-42"><a href="cleaning.html#cb9-42" tabindex="-1"></a>    <span class="kw">preserve</span></span>
<span id="cb9-43"><a href="cleaning.html#cb9-43" tabindex="-1"></a>        <span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span> &lt;= 2005</span>
<span id="cb9-44"><a href="cleaning.html#cb9-44" tabindex="-1"></a>        <span class="kw">ren</span> vsic4 vsic4_1993</span>
<span id="cb9-45"><a href="cleaning.html#cb9-45" tabindex="-1"></a>        </span>
<span id="cb9-46"><a href="cleaning.html#cb9-46" tabindex="-1"></a>        <span class="kw">merge</span> <span class="fu">m</span>:1 vsic4_1993 <span class="kw">using</span> <span class="st">"$tem/cw_vsic_1993"</span></span>
<span id="cb9-47"><a href="cleaning.html#cb9-47" tabindex="-1"></a>            <span class="kw">drop</span> <span class="kw">if</span> _m == 2</span>
<span id="cb9-48"><a href="cleaning.html#cb9-48" tabindex="-1"></a>            <span class="kw">drop</span> _m </span>
<span id="cb9-49"><a href="cleaning.html#cb9-49" tabindex="-1"></a>        </span>
<span id="cb9-50"><a href="cleaning.html#cb9-50" tabindex="-1"></a>        <span class="kw">tempfile</span> vsic4_1993</span>
<span id="cb9-51"><a href="cleaning.html#cb9-51" tabindex="-1"></a>        <span class="kw">save</span> <span class="ot">`vsic4_1993'</span>, <span class="kw">replace</span></span>
<span id="cb9-52"><a href="cleaning.html#cb9-52" tabindex="-1"></a>    <span class="kw">restore</span></span>
<span id="cb9-53"><a href="cleaning.html#cb9-53" tabindex="-1"></a>    </span>
<span id="cb9-54"><a href="cleaning.html#cb9-54" tabindex="-1"></a>    <span class="kw">use</span> <span class="ot">`vsic4_2018'</span>, <span class="kw">clear</span> </span>
<span id="cb9-55"><a href="cleaning.html#cb9-55" tabindex="-1"></a>        <span class="kw">append</span> <span class="kw">using</span> <span class="ot">`vsic4_2007'</span></span>
<span id="cb9-56"><a href="cleaning.html#cb9-56" tabindex="-1"></a>        <span class="kw">append</span> <span class="kw">using</span> <span class="ot">`vsic4_1993'</span></span>
<span id="cb9-57"><a href="cleaning.html#cb9-57" tabindex="-1"></a>                </span>
<span id="cb9-58"><a href="cleaning.html#cb9-58" tabindex="-1"></a><span class="co">/*  </span></span>
<span id="cb9-59"><a href="cleaning.html#cb9-59" tabindex="-1"></a><span class="co">    import excel "https://docs.google.com/spreadsheets/d/1z1FoluAF2u6vSx7LM_uHxjLDjmr7d3JHDB1zvJiu-cs/export?format=xlsx&amp;gid=299465942", ///</span></span>
<span id="cb9-60"><a href="cleaning.html#cb9-60" tabindex="-1"></a><span class="co">        clear firstrow</span></span>
<span id="cb9-61"><a href="cleaning.html#cb9-61" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb9-62"><a href="cleaning.html#cb9-62" tabindex="-1"></a><span class="co">            drop if _n &gt;= 668</span></span>
<span id="cb9-63"><a href="cleaning.html#cb9-63" tabindex="-1"></a><span class="co">            destring vsic4_2007 vsic4_1993, replace</span></span>
<span id="cb9-64"><a href="cleaning.html#cb9-64" tabindex="-1"></a><span class="co">            replace vsic4_2007 = int(vsic4_2007/10)</span></span>
<span id="cb9-65"><a href="cleaning.html#cb9-65" tabindex="-1"></a><span class="co">            keep vsic4_2007 vsic4_1993</span></span>
<span id="cb9-66"><a href="cleaning.html#cb9-66" tabindex="-1"></a></span>
<span id="cb9-67"><a href="cleaning.html#cb9-67" tabindex="-1"></a><span class="co">            duplicates drop vsic4_2007, force</span></span>
<span id="cb9-68"><a href="cleaning.html#cb9-68" tabindex="-1"></a><span class="co">            </span></span>
<span id="cb9-69"><a href="cleaning.html#cb9-69" tabindex="-1"></a><span class="co">        save "$tem/cw_vsic_2007_1993", replace</span></span>
<span id="cb9-70"><a href="cleaning.html#cb9-70" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb9-71"><a href="cleaning.html#cb9-71" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb9-72"><a href="cleaning.html#cb9-72" tabindex="-1"></a><span class="co">    import excel "https://docs.google.com/spreadsheets/d/1z1FoluAF2u6vSx7LM_uHxjLDjmr7d3JHDB1zvJiu-cs/export?format=xlsx&amp;gid=567783578", ///</span></span>
<span id="cb9-73"><a href="cleaning.html#cb9-73" tabindex="-1"></a><span class="co">        clear firstrow</span></span>
<span id="cb9-74"><a href="cleaning.html#cb9-74" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb9-75"><a href="cleaning.html#cb9-75" tabindex="-1"></a><span class="co">            drop if _n &gt;= 471</span></span>
<span id="cb9-76"><a href="cleaning.html#cb9-76" tabindex="-1"></a><span class="co">            keep vsic4_2018 vsic4_2007</span></span>
<span id="cb9-77"><a href="cleaning.html#cb9-77" tabindex="-1"></a><span class="co">            </span></span>
<span id="cb9-78"><a href="cleaning.html#cb9-78" tabindex="-1"></a><span class="co">            duplicates drop vsic4_2007, force       </span></span>
<span id="cb9-79"><a href="cleaning.html#cb9-79" tabindex="-1"></a></span>
<span id="cb9-80"><a href="cleaning.html#cb9-80" tabindex="-1"></a><span class="co">                merge 1:1 vsic4_2007 using "$tem/cw_vsic_2007_1993"</span></span>
<span id="cb9-81"><a href="cleaning.html#cb9-81" tabindex="-1"></a><span class="co">                    drop if _m == 2</span></span>
<span id="cb9-82"><a href="cleaning.html#cb9-82" tabindex="-1"></a><span class="co">                    drop _m</span></span>
<span id="cb9-83"><a href="cleaning.html#cb9-83" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb9-84"><a href="cleaning.html#cb9-84" tabindex="-1"></a><span class="co">        save "$tem/cw_vsic_2018_2007_1993", replace</span></span>
<span id="cb9-85"><a href="cleaning.html#cb9-85" tabindex="-1"></a><span class="co">                    </span></span>
<span id="cb9-86"><a href="cleaning.html#cb9-86" tabindex="-1"></a><span class="co">*/</span>  </span></code></pre></div>
<p>Next, we clean variables with beginning-of-year and end-of-year values. The principle here is to use the <code>rowmean</code> command, which handles cases where either the beginning or end value is missing.
Additionally, international trade variables like export and import are converted to dummy variables (0 for no, 1 for yes). In the raw data, these variables have various formats (import/export value, tax, etc.), so we simplify them to dummies. Note that for those interested in deep trade analysis, import/export values cannot be consistently extracted from the raw data as they were asked in very few years.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb10-1"><a href="cleaning.html#cb10-1" tabindex="-1"></a>**## 2.4. Clean labor indicators</span>
<span id="cb10-2"><a href="cleaning.html#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="cleaning.html#cb10-3" tabindex="-1"></a>        **### Total number <span class="kw">of</span> labor</span>
<span id="cb10-4"><a href="cleaning.html#cb10-4" tabindex="-1"></a>        <span class="kw">egen</span> laodong = <span class="fu">rowmean</span>(laodong_dk laodong_ck)               </span>
<span id="cb10-5"><a href="cleaning.html#cb10-5" tabindex="-1"></a></span>
<span id="cb10-6"><a href="cleaning.html#cb10-6" tabindex="-1"></a>        **### Total number <span class="kw">of</span> female labor</span>
<span id="cb10-7"><a href="cleaning.html#cb10-7" tabindex="-1"></a>        <span class="kw">egen</span> laodong_nu = <span class="fu">rowmean</span>(laodong_nu_dk laodong_nu_dk)              </span>
<span id="cb10-8"><a href="cleaning.html#cb10-8" tabindex="-1"></a>                </span>
<span id="cb10-9"><a href="cleaning.html#cb10-9" tabindex="-1"></a>        **### Total expenses related to labor</span>
<span id="cb10-10"><a href="cleaning.html#cb10-10" tabindex="-1"></a>        <span class="kw">egen</span> luong = <span class="fu">rowtotal</span>(luong_1 luong_2 luong_3)</span>
<span id="cb10-11"><a href="cleaning.html#cb10-11" tabindex="-1"></a>            <span class="kw">replace</span> luong = luong_0 <span class="kw">if</span> luong_0 != . </span>
<span id="cb10-12"><a href="cleaning.html#cb10-12" tabindex="-1"></a></span>
<span id="cb10-13"><a href="cleaning.html#cb10-13" tabindex="-1"></a>    </span>
<span id="cb10-14"><a href="cleaning.html#cb10-14" tabindex="-1"></a>**## 2.5. Clean Asset indicators</span>
<span id="cb10-15"><a href="cleaning.html#cb10-15" tabindex="-1"></a></span>
<span id="cb10-16"><a href="cleaning.html#cb10-16" tabindex="-1"></a>        **### Total assets</span>
<span id="cb10-17"><a href="cleaning.html#cb10-17" tabindex="-1"></a>        <span class="kw">egen</span> tongtaisan = <span class="fu">rowmean</span>(taisan_tong_dk taisan_tong_ck)                </span>
<span id="cb10-18"><a href="cleaning.html#cb10-18" tabindex="-1"></a></span>
<span id="cb10-19"><a href="cleaning.html#cb10-19" tabindex="-1"></a>        **### Fixed Asset</span>
<span id="cb10-20"><a href="cleaning.html#cb10-20" tabindex="-1"></a>        <span class="kw">if</span> (<span class="fu">year</span> &gt;= 2000 &amp; <span class="fu">year</span> &lt;= 2011) | <span class="fu">year</span> == 2019 | <span class="fu">year</span> == 2020 {</span>
<span id="cb10-21"><a href="cleaning.html#cb10-21" tabindex="-1"></a>            <span class="kw">egen</span> tscd = <span class="fu">rowmean</span>(taisan_codinh_dk taisan_codinh_dk)              </span>
<span id="cb10-22"><a href="cleaning.html#cb10-22" tabindex="-1"></a>        }</span>
<span id="cb10-23"><a href="cleaning.html#cb10-23" tabindex="-1"></a>        </span>
<span id="cb10-24"><a href="cleaning.html#cb10-24" tabindex="-1"></a>        **### Historical cost, accumulated depreciation, onstruction <span class="kw">in</span> progress (CIP)</span>
<span id="cb10-25"><a href="cleaning.html#cb10-25" tabindex="-1"></a>        <span class="kw">foreach</span> <span class="kw">var</span> <span class="kw">in</span> ng hmlk xdcb {</span>
<span id="cb10-26"><a href="cleaning.html#cb10-26" tabindex="-1"></a>            <span class="kw">egen</span> <span class="ot">`var'</span> = <span class="fu">rowmean</span>(<span class="ot">`var'</span>_dk <span class="ot">`var'</span>_ck)                             </span>
<span id="cb10-27"><a href="cleaning.html#cb10-27" tabindex="-1"></a>        }</span>
<span id="cb10-28"><a href="cleaning.html#cb10-28" tabindex="-1"></a>    </span>
<span id="cb10-29"><a href="cleaning.html#cb10-29" tabindex="-1"></a>        <span class="kw">replace</span> xdcb = 0 <span class="kw">if</span> xdcb == .</span>
<span id="cb10-30"><a href="cleaning.html#cb10-30" tabindex="-1"></a>        <span class="kw">replace</span> tscd = ng - hmlk + xdcb <span class="kw">if</span>  (<span class="fu">year</span> &gt;= 2012 &amp; <span class="fu">year</span> &lt;= 2018) | <span class="fu">year</span> == 2021</span>
<span id="cb10-31"><a href="cleaning.html#cb10-31" tabindex="-1"></a>        </span>
<span id="cb10-32"><a href="cleaning.html#cb10-32" tabindex="-1"></a>        **### liabilities</span>
<span id="cb10-33"><a href="cleaning.html#cb10-33" tabindex="-1"></a>        <span class="kw">egen</span> nophaitra = <span class="fu">rowmean</span>(nophaitra_dk nophaitra_ck)                     </span>
<span id="cb10-34"><a href="cleaning.html#cb10-34" tabindex="-1"></a>            </span>
<span id="cb10-35"><a href="cleaning.html#cb10-35" tabindex="-1"></a>**## 2.6. Clean business result indicators </span>
<span id="cb10-36"><a href="cleaning.html#cb10-36" tabindex="-1"></a>            </span>
<span id="cb10-37"><a href="cleaning.html#cb10-37" tabindex="-1"></a>        **### Total profit before tax</span>
<span id="cb10-38"><a href="cleaning.html#cb10-38" tabindex="-1"></a>        <span class="kw">replace</span> tongloinhuan = loinhuan_lai - loinhuan_lo <span class="kw">if</span> <span class="fu">year</span> == 2000 | <span class="fu">year</span> == 2001</span>
<span id="cb10-39"><a href="cleaning.html#cb10-39" tabindex="-1"></a></span>
<span id="cb10-40"><a href="cleaning.html#cb10-40" tabindex="-1"></a></span>
<span id="cb10-41"><a href="cleaning.html#cb10-41" tabindex="-1"></a>**## 2.7. Clean trade indicator </span>
<span id="cb10-42"><a href="cleaning.html#cb10-42" tabindex="-1"></a></span>
<span id="cb10-43"><a href="cleaning.html#cb10-43" tabindex="-1"></a>        <span class="kw">replace</span> nhapkhau = 0 <span class="kw">if</span> nhapkhau == . | (nhapkhau == 2 &amp; <span class="fu">year</span> == 2004)  </span>
<span id="cb10-44"><a href="cleaning.html#cb10-44" tabindex="-1"></a>        <span class="kw">replace</span> xuatkhau = 0 <span class="kw">if</span> xuatkhau == . | (xuatkhau == 2 &amp; <span class="fu">year</span> == 2004)  </span>
<span id="cb10-45"><a href="cleaning.html#cb10-45" tabindex="-1"></a>        </span>
<span id="cb10-46"><a href="cleaning.html#cb10-46" tabindex="-1"></a>        <span class="kw">replace</span> nhapkhau = 1 <span class="kw">if</span> nhapkhau != 0   </span>
<span id="cb10-47"><a href="cleaning.html#cb10-47" tabindex="-1"></a>        <span class="kw">replace</span> xuatkhau = 1 <span class="kw">if</span> xuatkhau != 0 </span>
<span id="cb10-48"><a href="cleaning.html#cb10-48" tabindex="-1"></a></span>
<span id="cb10-49"><a href="cleaning.html#cb10-49" tabindex="-1"></a>        <span class="kw">replace</span> xuatnhapkhau = 0 <span class="kw">if</span> xuatnhapkhau == 2 | xuatnhapkhau == .</span>
<span id="cb10-50"><a href="cleaning.html#cb10-50" tabindex="-1"></a>        <span class="kw">replace</span> xuatnhapkhau = 1 <span class="kw">if</span> xuatkhau == 1 | nhapkhau == 1</span>
<span id="cb10-51"><a href="cleaning.html#cb10-51" tabindex="-1"></a>        </span>
<span id="cb10-52"><a href="cleaning.html#cb10-52" tabindex="-1"></a>**## 2.8. Keep interested variables </span>
<span id="cb10-53"><a href="cleaning.html#cb10-53" tabindex="-1"></a>        </span>
<span id="cb10-54"><a href="cleaning.html#cb10-54" tabindex="-1"></a>    keeporder   mst mst_2 <span class="fu">year</span>                                                                  <span class="co">///                                                                 </span></span>
<span id="cb10-55"><a href="cleaning.html#cb10-55" tabindex="-1"></a>                tinh huyen xa                                                                   <span class="co">///                                                                     </span></span>
<span id="cb10-56"><a href="cleaning.html#cb10-56" tabindex="-1"></a>                namsxkd tthd lhdn vsic4_2018 vsic4_2007 vsic4_1993                              <span class="co">///                         </span></span>
<span id="cb10-57"><a href="cleaning.html#cb10-57" tabindex="-1"></a>                laodong laodong_nu                                                              <span class="co">///                                 </span></span>
<span id="cb10-58"><a href="cleaning.html#cb10-58" tabindex="-1"></a>                luong                                                                           <span class="co">///                     </span></span>
<span id="cb10-59"><a href="cleaning.html#cb10-59" tabindex="-1"></a>                tongtaisan                                                                      <span class="co">///             </span></span>
<span id="cb10-60"><a href="cleaning.html#cb10-60" tabindex="-1"></a>                tscd ng hmlk xdcb                                                               <span class="co">///                                                             </span></span>
<span id="cb10-61"><a href="cleaning.html#cb10-61" tabindex="-1"></a>                nophaitra                                                                       <span class="co">///         </span></span>
<span id="cb10-62"><a href="cleaning.html#cb10-62" tabindex="-1"></a>                tongdoanhthu                                                                    <span class="co">///</span></span>
<span id="cb10-63"><a href="cleaning.html#cb10-63" tabindex="-1"></a>                doanhthubanhang doanhthuthuan giavon giamtru                                    <span class="co">///                             </span></span>
<span id="cb10-64"><a href="cleaning.html#cb10-64" tabindex="-1"></a>                doanhthutaichinh doanhthukhac                                                   <span class="co">///             </span></span>
<span id="cb10-65"><a href="cleaning.html#cb10-65" tabindex="-1"></a>                tongloinhuan thuethunhap                                                        <span class="co">///         </span></span>
<span id="cb10-66"><a href="cleaning.html#cb10-66" tabindex="-1"></a>                nhapkhau xuatkhau xuatnhapkhau                                                                  </span>
<span id="cb10-67"><a href="cleaning.html#cb10-67" tabindex="-1"></a></span>
<span id="cb10-68"><a href="cleaning.html#cb10-68" tabindex="-1"></a>    <span class="kw">save</span> <span class="st">"$tem/tiny_data.dta"</span>, <span class="kw">replace</span></span></code></pre></div>
<p>After cleaning, we need to label the variables for easy understanding and usage.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb11-1"><a href="cleaning.html#cb11-1" tabindex="-1"></a>* ---------------------------------------------------------------------------</span>
<span id="cb11-2"><a href="cleaning.html#cb11-2" tabindex="-1"></a>**# 3. Label variables and <span class="kw">label</span> <span class="ot">value</span> </span>
<span id="cb11-3"><a href="cleaning.html#cb11-3" tabindex="-1"></a>* ---------------------------------------------------------------------------</span>
<span id="cb11-4"><a href="cleaning.html#cb11-4" tabindex="-1"></a></span>
<span id="cb11-5"><a href="cleaning.html#cb11-5" tabindex="-1"></a>    iecodebook apply <span class="kw">using</span> <span class="st">"$tem/codebook_tiny_data.xlsx"</span></span>
<span id="cb11-6"><a href="cleaning.html#cb11-6" tabindex="-1"></a>    </span>
<span id="cb11-7"><a href="cleaning.html#cb11-7" tabindex="-1"></a>    <span class="kw">save</span> <span class="st">"$cle/ves_00_21.dta"</span>, <span class="kw">replace</span> </span>
<span id="cb11-8"><a href="cleaning.html#cb11-8" tabindex="-1"></a>    </span>
<span id="cb11-9"><a href="cleaning.html#cb11-9" tabindex="-1"></a>    forval val = 2000/2021 {</span>
<span id="cb11-10"><a href="cleaning.html#cb11-10" tabindex="-1"></a>        <span class="kw">preserve</span></span>
<span id="cb11-11"><a href="cleaning.html#cb11-11" tabindex="-1"></a>            <span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span> == <span class="ot">`val'</span></span>
<span id="cb11-12"><a href="cleaning.html#cb11-12" tabindex="-1"></a>            <span class="kw">save</span> <span class="st">"$cle/ves_`val'.dta"</span>, <span class="kw">replace</span> </span>
<span id="cb11-13"><a href="cleaning.html#cb11-13" tabindex="-1"></a>        <span class="kw">restore</span></span>
<span id="cb11-14"><a href="cleaning.html#cb11-14" tabindex="-1"></a>    }</span></code></pre></div>

</div>
</div>
  <div class="chapter-nav">
<div class="empty"></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <h2>VEC Codebook</h2>
    <ul class="list-unstyled">
<li><a href="https://github.com/depocen-cased/vec">View on GitHub <i class="fab fa-github"></i></a></li>
      <li><a href="https://github.com/depocen-cased/vec/issues">Open an issue <i class="fas fa-question"></i></a></li>
    </ul>
<hr>
<nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Vietnam Enterprise Census Codebook</strong>" was written by DEPOCEN research team. It was last built on 2026-02-11.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
